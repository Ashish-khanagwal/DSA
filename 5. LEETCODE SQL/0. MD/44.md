# Intuition

Each product can have multiple price changes across different dates. To determine the price of each product **on** `2019-08-16`, we must use the **latest price change on or before that date**.  
If a product has **no price change by that date**, its price should default to **10**.

# Approach

1. Extract the list of **unique product IDs** from the `Products` table.
2. For each product, run a **correlated subquery** to:
   - Find all price changes with `change_date <= '2019-08-16'`.
   - Sort them by date in **descending** order.
   - Take the **most recent** one using `LIMIT 1`.
3. If the subquery returns `NULL` (meaning the product had no price change on or before the date), use **10** as the default price via `IFNULL`.
4. Return results ordered by `product_id`.

# Complexity

- **Time Complexity:**  
  For each product, we search its historical prices → worst case **O(n²)** using correlated subqueries, but acceptable for SQL evaluation tasks.

- **Space Complexity:**  
  Only temporary processing tables are used → **O(n)**.

# Code

```mysql
SELECT p.product_id,
    IFNULL(
        (
            SELECT p2.new_price
            FROM Products p2
            WHERE p2.product_id = p.product_id
              AND p2.change_date <= '2019-08-16'
            ORDER BY p2.change_date DESC
            LIMIT 1
        ), 10
    ) AS price
FROM (SELECT DISTINCT product_id FROM Products) AS p
ORDER BY product_id;
```
